; ============================================================
; AlkoMetric/VibeGo Kiosk - PlatformIO Konfigürasyonu
; Platform: JC2432W328 (ESP32-WROOM-32 + ST7789 + CST820)
; Flash: 4MB (huge_app partition = 3MB app space)
; ============================================================

[platformio]
default_envs = jc2432w328

; ============================================================
; Ortak Ayarlar
; ============================================================
[common]
platform = espressif32@6.5.0
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; ESP32-WROOM-32: 4MB Flash
board_build.mcu = esp32
board_build.f_cpu = 240000000L
board_build.flash_mode = dio
board_upload.flash_size = 4MB

; HUGE_APP partition: 3MB app space (no OTA partition)
board_build.partitions = huge_app.csv

build_flags = 
    -DCORE_DEBUG_LEVEL=1
    -Os
    -DARDUINO_LOOP_STACK_SIZE=16384
    -DLV_CONF_INCLUDE_SIMPLE
    -DLV_COMP_CONF_INCLUDE_SIMPLE
    -DLV_LVGL_H_INCLUDE_SIMPLE
    ; ST7789 Display Pins
    -DTFT_MOSI=13
    -DTFT_SCLK=14
    -DTFT_CS=15
    -DTFT_DC=2
    -DTFT_RST=-1
    -DTFT_BL=27
    ; CST820 Touch Pins
    -DTOUCH_SDA=33
    -DTOUCH_SCL=32
    -DTOUCH_RST=25
    -DTOUCH_INT=21
    ; Screen Resolution
    -DSCREEN_WIDTH=240
    -DSCREEN_HEIGHT=320
    ; LDR Pin
    -DLDR_PIN=34
    -I src

lib_deps = 
    lovyan03/LovyanGFX @ ^1.1.16
    lvgl/lvgl @ ^8.3.11
    bblanchon/ArduinoJson @ ^6.21.3
    https://github.com/tzapu/WiFiManager.git
    https://github.com/me-no-dev/ESPAsyncWebServer.git
    https://github.com/me-no-dev/AsyncTCP.git

; ============================================================
; Ana Ortam: USB ile Yükleme
; ============================================================
[env:jc2432w328]
extends = common
upload_protocol = esptool
monitor_filters = esp32_exception_decoder
